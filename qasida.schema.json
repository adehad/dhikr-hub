{
  "$schema": "https://json-schema.org/draft/2019-09/schema",
  "$id": "https://raw.githubusercontent.com/adehad/dhikr-hub/refs/heads/main/qasida.schema.json",
  "type": "object",
  "title": "Qasida Schema",
  "description": "Schema for Islamic poetry (Qasida) data files in the Dhikr Hub project. FORMATTING: Use blank lines to group related verses visually (matching the order groupings). The 'order' object uses compact single-line format: { \"repeat\": 1, \"index\": 0 } with spaces after braces and colons.",
  "required": ["name", "verses", "translation", "order"],
  "properties": {
    "name": {
      "type": "object",
      "title": "The Qasida name",
      "description": "Contains the qasida title in Arabic and English",
      "required": ["ara", "en"],
      "properties": {
        "ara": {
          "type": "string",
          "title": "Arabic name",
          "description": "The qasida name in Arabic script with tashkeel (vowel marks)",
          "minLength": 1,
          "examples": ["صَفَتِ النَّظْرَةُ", "طَلَعَ الْبَدْرُ عَلَيْنَا", "يَا هَنَانَا"]
        },
        "en": {
          "type": "string",
          "title": "English name",
          "description": "Format: 'Transliteration - Translation' using Library of Congress Arabic Romanization. Transliteration should use proper diacritics (ā, ī, ū for long vowels; ṣ, ḍ, ṭ, ẓ for emphatics; ʿ for ayn; ḥ for ḥā')",
          "minLength": 1,
          "pattern": ".+ - .+",
          "examples": [
            "Ṣafati al-Naẓra - Clear was the Vision",
            "Ṭalaʿa l-Badru ʿAlaynā - The Full Moon Rose Over Us",
            "Ya Hanana - Oh Our Joy!"
          ]
        }
      },
      "additionalProperties": false
    },
    "verses": {
      "type": "object",
      "title": "The verses",
      "description": "Contains Arabic verses and their transliterations. Both arrays must have the same length.",
      "required": ["ara", "en"],
      "properties": {
        "ara": {
          "type": "array",
          "title": "Arabic verses",
          "description": "Verses in Arabic script with tashkeel (vowel marks: fatḥa, kasra, ḍamma, sukūn, shadda)",
          "minItems": 1,
          "items": {
            "type": "string",
            "minLength": 1,
            "title": "Arabic verse"
          }
        },
        "en": {
          "type": "array",
          "title": "Transliterated verses",
          "description": "Verses transliterated using Library of Congress Arabic Romanization with proper diacritics",
          "minItems": 1,
          "items": {
            "type": "string",
            "minLength": 1,
            "title": "Transliterated verse"
          }
        }
      },
      "additionalProperties": false
    },
    "translation": {
      "type": "object",
      "title": "The verse translations",
      "description": "Translations of the verses. The array length should match verses.ara and verses.en.",
      "required": ["en"],
      "properties": {
        "en": {
          "type": "array",
          "title": "English translations",
          "description": "English meaning translations of each verse",
          "minItems": 1,
          "items": {
            "type": "string",
            "minLength": 1,
            "title": "English translation"
          }
        }
      },
      "additionalProperties": false
    },
    "order": {
      "type": "object",
      "title": "The verse order",
      "description": "Defines the performance order of chorus and verses, with repeat counts",
      "required": ["chorus", "verses"],
      "properties": {
        "chorus": {
          "type": "array",
          "title": "Chorus sections",
          "description": "Groups of verse references that form the chorus/refrain",
          "items": {
            "type": "array",
            "title": "Chorus group",
            "description": "A group of verses sung together as part of the chorus",
            "minItems": 1,
            "items": {
              "$ref": "#/$defs/verseReference"
            }
          }
        },
        "verses": {
          "type": "array",
          "title": "Verse sections",
          "description": "Groups of verse references that form the main verses/stanzas",
          "items": {
            "type": "array",
            "title": "Verse group",
            "description": "A group of verses sung together as a stanza",
            "minItems": 1,
            "items": {
              "$ref": "#/$defs/verseReference"
            }
          }
        }
      },
      "additionalProperties": false
    }
  },
  "additionalProperties": false,
  "examples": [
    {
      "name": {
        "ara": "طَلَعَ الْبَدْرُ عَلَيْنَا",
        "en": "Ṭalaʿa l-Badru ʿAlaynā - The Full Moon Rose Over Us"
      },
      "verses": {
        "ara": [
          "طَلَعَ الْبَدْرُ عَلَيْنَا",
          "مِنْ ثَنِيَّاتِ الْوَدَاعْ",

          "أَيُّهَا الْمَبْعُوثُ فِينَا",
          "جِئْتَ بِالْأَمْرِ الْمُطَاعْ"
        ],
        "en": [
          "ṭalaʿa l-badru ʿalaynā",
          "min thaniyyāti l-wadāʿ",

          "ayyuha l-mabʿūthu fīnā",
          "jiʾta bil-amri l-muṭāʿ"
        ]
      },
      "translation": {
        "en": [
          "The full moon rose over us",
          "from the valley of Wadāʿ",

          "O you who were raised amongst us",
          "you came with a command to be obeyed"
        ]
      },
      "order": {
        "chorus": [
          [
            { "repeat": 1, "index": 0 },
            { "repeat": 1, "index": 1 }
          ]
        ],
        "verses": [
          [
            { "repeat": 2, "index": 2 },
            { "repeat": 2, "index": 3 }
          ]
        ]
      }
    }
  ],
  "$defs": {
    "verseReference": {
      "type": "object",
      "title": "Verse reference",
      "description": "References a verse by index with a repeat count",
      "required": ["repeat", "index"],
      "properties": {
        "repeat": {
          "type": "integer",
          "title": "Repeat count",
          "description": "Number of times to repeat this verse (typically 1-3)",
          "minimum": 1,
          "maximum": 10
        },
        "index": {
          "type": "integer",
          "title": "Verse index",
          "description": "Zero-based index into the verses arrays (ara, en, translation.en)",
          "minimum": 0
        }
      },
      "additionalProperties": false
    }
  }
}
